---
layout: post
category : 
tags : ["RSS"]
---
{% include JB/setup %}

## RSS::Makerクラス
### rss/Maker/base.rb
#### class Base
- new_item

	`@items << item`

#### class RSSBase < Base
##### クラスメソッド
- make(*args, &block)

	`new(*args).make(&block)`
	
	下の`initialize`と`make`を呼んでいる
	
	`feed= RSS::Maker.make("2.0") do |feed|`
	
	のように使う

##### インスタンスメソッド
- initialize(feed_version)
- make

	`yield(self)`
	
	`to_feed`

#### class ChannelBase < Base

新しいフィードを作る際に、以下のように使う

    feed.channel.about = about
    feed.channel.title = title
    feed.channel.description = description
    feed.channel.link = link
    feed.channel.language = language

- about

	`attr_accessor about`

- title

	`def_classed_element(title, nil, "content")`
	
	    def title=(new_value)
    	  @title.content = new_value
    	end
	
- description

	`def_classed_element(description, nil, "content")`

	    def description=(new_value)
    	  @description.content = new_value
    	end

- date

	`attr_accessor date`
	
- language

	`attr_accessor language`
	
	`add_need_initialize_variable(language)`
	
	  def add_need_initialize_variable(variable_name)
	    self::NEED_INITIALIZE_VARIABLES << variable_name
	  end

#### class ItemsBase < Base

新しいフィードを作る際に、以下のように使う

    items.each do |feed_item|
      i= output_feed.items.new_item
      i.title       = item.title
      i.link        = item.link
      i.description = item.description
      i.date        = item.date
    end

- do_sort, max_size

	`attr_accessor :do_sort, :max_size`

## RSS::Parserクラス
### rss/parser.rb
#### class Parser
##### クラスメソッド
- parse(rss, do_validate=true, ignore_unknow_element=true)

      parser = new(rss, default_parser)
      parser.do_validate = do_validate
      parser.ignore_unknown_element = ignore_unknown_element
      parser.parse

	以下のように使う
	
	  feed = Net::HTTP.get(host, path).force_encoding('utf-8')
	  begin
        @feed = RSS::Parser.parse(feed)
      rescue RSS::InvalidRSSError
        @feed = RSS::Parser.parse(feed, false )
      end